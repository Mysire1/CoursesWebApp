# Система Управління Курсами (Веб-версія)

Веб-додаток для управління мовними курсами, створений на ASP.NET Core MVC з використанням PostgreSQL.

## Функції

- **Управління студентами**: Додавання, редагування, перегляд студентів
- **Аналітичні запити**: 10 різних запитів для аналізу даних
- **Розрахунок вартості**: Автоматичний розрахунок вартості курсів
- **Управління знижками**: Автоматичне надання знижок за лояльність
- **Ціноутворення для груп**: Надбавки для малих груп, знижки для великих
- **Розклад занять**: Перегляд розкладу по групах та викладачах

## Технології

- ASP.NET Core 8.0 MVC
- Entity Framework Core
- PostgreSQL
- Bootstrap 5
- jQuery
- C#

## Вимоги

- .NET 8.0 SDK
- PostgreSQL 12+
- Visual Studio 2022 або VS Code

## Налаштування та запуск

### 1. Клонування репозиторію

```bash
git clone https://github.com/Mysire1/CoursesWebApp.git
cd CoursesWebApp
```

### 2. Налаштування PostgreSQL

1. Встановіть та запустіть PostgreSQL
2. Створіть базу даних:

```sql
CREATE DATABASE courseswebapp;
```

3. Переконайтеся, що користувач `postgres` з паролем `root` має доступ до бази

### 3. Налаштування підключення

Відкрийте `appsettings.json` та за потреби змініть рядок підключення:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=courseswebapp;Username=postgres;Password=root"
  }
}
```

### 4. Встановлення залежностей

```bash
dotnet restore
```

### 5. Створення та заповнення бази даних

При першому запуску додаток автоматично:
- Створить всі необхідні таблиці
- Заповнить початковими даними (студенти, викладачі, мови, рівні)

### 6. Запуск додатку

```bash
dotnet run
```

Додаток буде доступний за адресою: `https://localhost:5001` або `http://localhost:5000`

## Структура проєкту

```
CoursesWebApp/
├── Controllers/          # MVC контролери
├── Data/                # ApplicationDbContext
├── Models/              # Моделі даних
├── Services/            # Бізнес-логіка
│   └── Impl/           # Реалізації сервісів
├── Views/              # Razor-шаблони
│   ├── Home/
│   ├── Students/
│   ├── Queries/
│   └── Shared/
├── wwwroot/            # Статичні файли
│   ├── css/
│   └── js/
└── Program.cs          # Точка входу
```

## Основні сторінки

### Головна сторінка
- Огляд статистики (кількість студентів, мов, викладачів, груп)
- Швидкий доступ до основних функцій

### Студенти
- Список всіх студентів
- Додавання нових студентів
- Редагування інформації
- Автоматичне надання знижок за лояльність

### Аналітичні запити
Всі 10 запитів з оригінального WPF додатку:

1. **Пошук груп** - за мовою та викладачем
2. **Розрахунок вартості** - повна, по рівнях, по місяцях
3. **Нездані іспити** - студенти з неуспішними результатами
4. **Викладачі за мовами** - групування за кількістю мов
5. **Статус оплати** - різні категорії студентів за оплатою
6. **Знижка за лояльність** - автоматичне надання 10% знижки
7. **Студенти за мовами** - німецька мова та багатомовні
8. **Надбавка малим групам** - 20% надбавка для груп < 5 студентів
9. **Знижка великим групам** - 5% знижка для груп = 20 студентів
10. **Розклад** - по групах та викладачах

## API Endpoints

### Студенти
- `GET /Students` - Список студентів
- `GET /Students/Create` - Форма додавання
- `POST /Students/Create` - Створення студента
- `GET /Students/Details/{id}` - Деталі студента
- `POST /Students/ApplyLoyaltyDiscount` - Знижка за лояльність

### Запити
- `GET /Queries` - Сторінка аналітичних запитів
- `POST /Queries/SearchGroups` - Пошук груп
- `POST /Queries/CalculateCost` - Розрахунок вартості
- `POST /Queries/GetFailedExams` - Нездані іспити
- `POST /Queries/GetTeachersByLanguageCount` - Викладачі за мовами
- `POST /Queries/GetPaymentStatus` - Статус оплати
- `POST /Queries/ApplySmallGroupSurcharge` - Надбавка малим групам
- `POST /Queries/ApplyLargeGroupDiscount` - Знижка великим групам
- `POST /Queries/GetSchedule` - Розклад

## Початкові дані

При першому запуску автоматично створюються:

- **5 мов**: Англійська, Німецька, Французька, Іспанська, Італійська
- **5 викладачів**: З українськими іменами та контактами
- **10 рівнів**: Від Beginner (A1) до Advanced (C1) для різних мов
- **5 студентів**: Тестові студенти з різним статусом знижок
- **4 аудиторії**: З різним обладнанням та місткістю

## Особливості реалізації

### Відмінності від WPF версії

1. **Архітектура**: Повністю переписана під веб-технології
2. **UI/UX**: Bootstrap замість WPF XAML
3. **AJAX**: Асинхронні запити для кращого UX
4. **Responsive**: Адаптивний дизайн для мобільних пристроїв
5. **RESTful**: API endpoints замість WPF команд

### Переваги веб-версії

- **Доступність**: Працює в браузері, не потребує встановлення
- **Кросплатформенність**: Linux, macOS, Windows
- **Мобільність**: Адаптивний дизайн
- **Багатокористувацьність**: Одночасний доступ кількох користувачів
- **Оновлення**: Централізовані оновлення

## Розробка

### Додавання нових функцій

1. Створіть модель в папці `Models/`
2. Додайте до `ApplicationDbContext`
3. Створіть сервіс в `Services/` та його реалізацію в `Services/Impl/`
4. Додайте контролер в `Controllers/`
5. Створіть відповідні View в `Views/`

### Тестування

```bash
# Запуск тестів (якщо є)
dotnet test

# Перевірка коду
dotnet build --configuration Release
```

## Розгортання

### Локальне розгортання

```bash
dotnet publish -c Release -o ./publish
```

### Docker (опціонально)

Можна створити Dockerfile для контейнеризації:

```dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS runtime
WORKDIR /app
COPY publish/ .
ENTRYPOINT ["dotnet", "CoursesWebApp.dll"]
```

## Підтримка

Якщо у вас виникли проблеми:

1. Перевірте, чи запущений PostgreSQL
2. Перевірте рядок підключення в `appsettings.json`
3. Переконайтеся, що порти 5000/5001 вільні
4. Перегляньте логи в консолі

## Ліцензія

МIT License

## Автор

Переробка з WPF на веб-версію виконана для навчальних цілей.
Оригінальний WPF додаток: [CoursesDekstopApp](https://github.com/Mysire1/CoursesDekstopApp)