@model IEnumerable<CoursesWebApp.Models.Student>

@if (Model != null && Model.Any())
{
    @foreach (var student in Model)
    {
        <tr>
            <td>@student.RegistrationDate.ToString("dd.MM.yyyy")</td>
            <td>@student.FullName</td>
            <td>
                @if (student.Group != null)
                {
                    @student.Group.GroupName
                }
                else if (student.GroupId != null)
                {
                    @student.GroupId
                }
                else
                {
                    <span class="text-muted">Не призначено</span>
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(student.PaymentStatus))
                {
                    if (student.PaymentStatus == "Сплачено")
                    {
                        <span class="badge bg-success">Сплачено</span>
                    }
                    else if (student.PaymentStatus == "Відтермінування")
                    {
                        <span class="badge bg-warning">Відтермінування</span>
                    }
                    else if (student.PaymentStatus == "Борг")
                    {
                        <span class="badge bg-danger">Борг</span>
                    }
                    else if (student.PaymentStatus == "Пільги")
                    {
                        <span class="badge bg-info">Пільги</span>
                    }
                    else
                    {
                        <span class="badge bg-secondary">@student.PaymentStatus</span>
                    }
                }
                else
                {
                    <span class="text-muted">Не вказано</span>
                }
                @if (student.HasDiscount)
                {
                    <span class="badge bg-info ms-1">Знижка @student.DiscountPercentage%</span>
                }
            </td>
            <td>
                <a href="/Students/Details/@student.StudentId" class="btn btn-sm btn-info">Переглянути</a>
            </td>
        </tr>
    }
}
else
{
    <tr>
        <td colspan="5" class="text-center text-muted">Студентів не знайдено</td>
    </tr>
}
